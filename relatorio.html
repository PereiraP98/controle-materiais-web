<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consultar Relatório</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/pt.js"></script>
    <style>
        /* Centraliza a janela de consulta apenas na página relatorio.html */
        body.relatorio-page .detalhes-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            max-width: 400px;
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        /* Fundo escurecido para foco na janela apenas na página relatorio.html */
        body.relatorio-page.modal-open {
            background: rgba(0, 0, 0, 0.5);
            overflow: hidden; /* Evita rolagem da página */
        }

        /* Estilo personalizado para centralizar o calendário */
        body.relatorio-page .flatpickr-calendar {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            z-index: 1001; /* Garante que o calendário fique acima de outros elementos */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }
    </style>
</head>
<body class="relatorio-page">
    <header>
        <div class="header-container">
            <div class="logo-container">
                <img src="https://github.com/PereiraP98/controle-materiais-web/blob/main/assets/Logo2.png?raw=true" alt="DevCore Logo" class="logo">
            </div>
            <h1>Consultar Relatório de Materiais</h1>
        </div>
    </header>
    <main class="main-container">
        <div class="detalhes-container">
            <h2>Consultar Relatório de Materiais</h2>
            <form>
                <div class="field-container">
                    <input 
                        type="text" 
                        id="data-relatorio" 
                        name="data-relatorio" 
                        placeholder="Selecione a data..." 
                        readonly 
                        class="date-input"
                    >
                </div>
                <div class="button-container">
                    <button type="button" onclick="location.href='painel.html'" class="secondary-button">Voltar</button>
                    <button type="button" id="selecionarDataButton" class="primary-button">Selecionar Data</button>
                </div>
            </form>
        </div>
    </main>
    <script>
        const dataRelatorioInput = document.getElementById("data-relatorio");
        const selecionarDataButton = document.getElementById("selecionarDataButton");

        // Inicializa o calendário Flatpickr
        const calendario = flatpickr(dataRelatorioInput, {
            dateFormat: "d/m/Y",
            locale: "pt",
            allowInput: false, // Impede entrada manual no campo
            clickOpens: true, // Abre o calendário ao clicar no campo
            onClose: function (selectedDates, dateStr) {
                if (dateStr) {
                    // Atualiza o botão para "Consultar Relatório" após selecionar a data
                    selecionarDataButton.textContent = "Consultar Relatório";
                    selecionarDataButton.setAttribute("data-selected", "true");
                }
            }
        });

        // Configura o comportamento do botão "Selecionar Data"
        selecionarDataButton.addEventListener("click", function () {
            if (selecionarDataButton.getAttribute("data-selected") === "true") {
                alert("Relatório para a data: " + dataRelatorioInput.value);
                // Adicione aqui a lógica para consultar o relatório
            } else {
                // Abre o calendário ao clicar no botão
                calendario.open();
            }
        });

        // Também abre o calendário ao clicar no campo de data
        dataRelatorioInput.addEventListener("click", function () {
            calendario.open();
        });
    </script>
</body>
</html>
