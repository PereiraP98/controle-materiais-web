<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consultar Relatório</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/pt.js"></script>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo-container">
                <img src="https://github.com/PereiraP98/controle-materiais-web/blob/main/assets/Logo2.png?raw=true" alt="DevCore Logo" class="logo">
            </div>
            <h1>Consultar Relatório de Materiais</h1>
        </div>
    </header>
    <main class="main-container">
        <div class="detalhes-container">
            <h2>Consultar Relatório de Materiais</h2>
            <form>
                <input type="hidden" id="data-relatorio" name="data-relatorio"> <!-- Campo invisível para armazenar a data -->
                <div class="button-container">
                    <button type="button" onclick="location.href='painel.html'" class="secondary-button">Voltar</button>
                    <button type="button" id="selecionarDataButton" class="primary-button">Selecionar Data</button>
                </div>
            </form>
        </div>
    </main>
    <script>
        // Inicializa o Flatpickr somente ao clicar no botão "Selecionar Data"
        const selecionarDataButton = document.getElementById("selecionarDataButton");
        const dataRelatorioInput = document.getElementById("data-relatorio");

        let calendario;

        selecionarDataButton.addEventListener("click", function () {
            if (!calendario) {
                calendario = flatpickr(dataRelatorioInput, {
                    dateFormat: "d/m/Y",
                    locale: "pt",
                    inline: true, // Abre diretamente como um calendário embutido
                    onChange: function(selectedDates, dateStr) {
                        // Atualiza o botão após selecionar uma data
                        if (dateStr) {
                            selecionarDataButton.textContent = "Consultar Relatório";
                            selecionarDataButton.setAttribute("data-selected", "true");
                        }
                    },
                });

                // Simula o clique no campo de data invisível para abrir o calendário
                dataRelatorioInput.click();
            } else {
                // Simula o clique no campo para reabrir o calendário
                dataRelatorioInput.click();
            }
        });

        // Comportamento ao clicar em "Consultar Relatório"
        selecionarDataButton.addEventListener("click", function () {
            if (selecionarDataButton.getAttribute("data-selected") === "true") {
                alert("Relatório para a data: " + dataRelatorioInput.value);
                // Aqui você pode adicionar a lógica para consultar o relatório
            }
        });
    </script>
</body>
</html>
