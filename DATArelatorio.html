<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatório de Materiais</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">

    <style>
        .logo {
            width: 60px;
            height: auto;
        }

        .emoji-button {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
        }

        .emoji-button:hover {
            transform: scale(1.2);
        }

        .hidden {
            display: none !important;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f4f4f4;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo-container">
                <img src="https://github.com/PereiraP98/controle-materiais-web/blob/main/assets/Logo2.png?raw=true" 
                     alt="DevCore Logo" class="logo">
            </div>
            <h1>Relatório de Materiais</h1>
        </div>
    </header>

    <main class="main-container">
        <h2>Detalhes do Relatório</h2>
        <table>
            <thead>
                <tr>
                    <th>LOCAL</th>
                    <th>ITEM</th>
                    <th>QTD</th>
                    <th>DESTINO</th>
                    <th>DATA</th>
                    <th>HORA</th>
                    <th>JUSTIFICATIVA</th>
                    <th>GUARDA</th>
                </tr>
            </thead>
            <tbody id="relatorioBody">
                <!-- Dados dinâmicos serão preenchidos aqui -->
            </tbody>
        </table>

        <div class="button-container">
            <button onclick="location.href='index.html'">Voltar</button>
        </div>
    </main>

    <!-- Janela Flutuante para Visualizar Justificativa -->
    <div id="janelaVisualizacaoJustificativa" class="hidden">
        <h2>Justificativa de Material Atrasado</h2>
        <p id="textoJustificativa"></p>
        <div class="button-container">
            <button onclick="fecharJanela('janelaVisualizacaoJustificativa')">Fechar</button>
        </div>
    </div>

    <!-- Janela Flutuante para Visualizar Material Guardado -->
    <div id="janelaVisualizacaoGuardado" class="hidden">
        <h2>Material Guardado</h2>
        <p><strong>Código do Item:</strong> <span id="visualizacaoCodigo"></span></p>
        <p><strong>Quantidade de Caixas:</strong> <span id="visualizacaoQuantidade"></span></p>
        <p><strong>Endereço:</strong> <span id="visualizacaoEndereco"></span></p>
        <p><strong>Endereço de UZ:</strong> <span id="visualizacaoEnderecoUZ"></span></p>
        <p><strong>Nome do Repositor:</strong> <span id="visualizacaoNome"></span></p>
        <div class="button-container">
            <button onclick="fecharJanela('janelaVisualizacaoGuardado')">Fechar</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const relatorioBody = document.getElementById('relatorioBody');

            // Simulação de dados carregados do relatório
            const dadosRelatorio = [
                {
                    local: 'CA',
                    item: '12345',
                    qtd: 10,
                    destino: 'PICKING',
                    data: '12/01',
                    hora: '14:30',
                    justificativa: 'Atraso devido à logística.',
                    guardado: {
                        codigo: '12345',
                        quantidade: 10,
                        endereco: 'A01',
                        enderecoUZ: '001',
                        nome: 'Lucas'
                    }
                },
                {
                    local: 'VF',
                    item: '54321',
                    qtd: 5,
                    destino: 'MESA',
                    data: '12/01',
                    hora: '15:00',
                    justificativa: null,
                    guardado: null
                }
            ];

            // Preencher tabela com os dados do relatório
            dadosRelatorio.forEach((dado, index) => {
                const row = document.createElement('tr');

                row.innerHTML = `
                    <td>${dado.local}</td>
                    <td>${dado.item}</td>
                    <td>${dado.qtd}</td>
                    <td>${dado.destino}</td>
                    <td>${dado.data}</td>
                    <td>${dado.hora}</td>
                    <td>${dado.justificativa ? `<button class="emoji-button" onclick="abrirJustificativa(${index})">📜</button>` : 'N/A'}</td>
                    <td>${dado.guardado ? `<button class="emoji-button" onclick="abrirGuardado(${index})">📦</button>` : 'N/A'}</td>
                `;

                relatorioBody.appendChild(row);
            });

            // Funções para abrir janelas
            window.abrirJustificativa = function(index) {
                const justificativa = dadosRelatorio[index].justificativa;
                if (justificativa) {
                    document.getElementById('textoJustificativa').textContent = justificativa;
                    document.getElementById('janelaVisualizacaoJustificativa').classList.remove('hidden');
                }
            };

            window.abrirGuardado = function(index) {
                const guardado = dadosRelatorio[index].guardado;
                if (guardado) {
                    document.getElementById('visualizacaoCodigo').textContent = guardado.codigo;
                    document.getElementById('visualizacaoQuantidade').textContent = guardado.quantidade;
                    document.getElementById('visualizacaoEndereco').textContent = guardado.endereco;
                    document.getElementById('visualizacaoEnderecoUZ').textContent = guardado.enderecoUZ;
                    document.getElementById('visualizacaoNome').textContent = guardado.nome;
                    document.getElementById('janelaVisualizacaoGuardado').classList.remove('hidden');
                }
            };

            window.fecharJanela = function(id) {
                document.getElementById(id).classList.add('hidden');
            };
        });
    </script>
</body>
</html>
